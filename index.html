<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ì—Ä–∞: –°–µ–Ω–∫–∞–Ω –¥–æ —Å–ª–æ–≤–∞ ¬´–ñ–∏—Ç—Ç—è¬ª</title>
  <style>
    :root{
      --bg:#0b1220;
      --card:#121b2f;
      --card2:#0f172a;
      --text:#e7eefc;
      --muted:#a6b4d0;
      --accent:#4da3ff;
      --accent2:#8b5cf6;
      --good:#22c55e;
      --warn:#f59e0b;
      --bad:#ef4444;
      --border:rgba(231,238,252,.12);
      --shadow: 0 14px 35px rgba(0,0,0,.35);
      --radius: 18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Liberation Sans", sans-serif;
      background:
        radial-gradient(1200px 600px at 10% 10%, rgba(77,163,255,.20), transparent 55%),
        radial-gradient(900px 500px at 80% 30%, rgba(139,92,246,.18), transparent 55%),
        radial-gradient(800px 700px at 50% 90%, rgba(34,197,94,.10), transparent 60%),
        var(--bg);
      color: var(--text);
      min-height: 100vh;
      padding: 22px;
    }
    .wrap{
      max-width: 980px;
      margin: 0 auto;
      display: grid;
      gap: 18px;
    }
    header{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 12px;
      padding: 18px 18px 10px;
      border: 1px solid var(--border);
      background: linear-gradient(180deg, rgba(18,27,47,.92), rgba(15,23,42,.80));
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }
    h1{
      margin:0;
      font-size: clamp(20px, 2.4vw, 30px);
      letter-spacing: .2px;
    }
    .sub{
      margin-top: 6px;
      color: var(--muted);
      line-height: 1.35;
      font-size: 14px;
      max-width: 64ch;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: rgba(11,18,32,.45);
      color: var(--muted);
      font-size: 13px;
      white-space: nowrap;
    }
    .pill b{color: var(--text)}
    .grid{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap: 18px;
    }
    @media (max-width: 880px){
      .grid{grid-template-columns: 1fr}
    }
    .card{
      border: 1px solid var(--border);
      background: rgba(18,27,47,.86);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .card .hd{
      padding: 14px 16px;
      background: rgba(15,23,42,.75);
      border-bottom: 1px solid var(--border);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .card .hd h2{
      font-size: 16px;
      margin:0;
      color: var(--text);
    }
    .card .bd{
      padding: 16px;
    }
    .rules{
      display:grid;
      gap: 10px;
      color: var(--muted);
      font-size: 14px;
      line-height: 1.35;
    }
    .rules .line{
      padding: 10px 12px;
      border: 1px solid var(--border);
      background: rgba(11,18,32,.30);
      border-radius: 14px;
    }
    .rules .line b{color: var(--text)}
    .form{
      display:grid;
      gap: 12px;
    }
    .row{
      display:grid;
      gap: 8px;
      padding: 12px;
      border: 1px solid var(--border);
      background: rgba(11,18,32,.30);
      border-radius: 14px;
    }
    .row label{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      font-size: 13px;
      color: var(--muted);
    }
    .row label span{
      display:inline-flex;
      align-items:center;
      gap:8px;
    }
    .row label .hint{
      font-size: 12px;
      color: rgba(166,180,208,.9);
    }
    input[type="text"], textarea{
      width:100%;
      padding: 12px 12px;
      border-radius: 12px;
      border: 1px solid rgba(231,238,252,.14);
      background: rgba(15,23,42,.70);
      color: var(--text);
      outline: none;
      font-size: 15px;
    }
    textarea{min-height: 84px; resize: vertical}
    input[type="text"]::placeholder, textarea::placeholder{color: rgba(166,180,208,.65)}
    input[type="text"]:focus, textarea:focus{
      border-color: rgba(77,163,255,.55);
      box-shadow: 0 0 0 4px rgba(77,163,255,.18);
    }
    .controls{
      display:flex;
      flex-wrap:wrap;
      gap: 10px;
      margin-top: 10px;
    }
    button{
      appearance:none;
      border: 1px solid var(--border);
      background: rgba(15,23,42,.75);
      color: var(--text);
      padding: 11px 12px;
      border-radius: 14px;
      cursor:pointer;
      font-size: 14px;
      transition: transform .06s ease, border-color .15s ease, background .15s ease;
    }
    button:active{transform: translateY(1px)}
    button.primary{
      background: linear-gradient(90deg, rgba(77,163,255,.85), rgba(139,92,246,.85));
      border-color: rgba(231,238,252,.18);
    }
    button.ghost{
      background: transparent;
    }
    button.danger{
      background: rgba(239,68,68,.14);
      border-color: rgba(239,68,68,.30);
    }
    .status{
      display:grid;
      gap: 10px;
    }
    .scorebox{
      display:grid;
      gap: 10px;
      padding: 12px;
      border: 1px solid var(--border);
      background: rgba(11,18,32,.30);
      border-radius: 14px;
    }
    .score-top{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap: 10px;
    }
    .score{
      font-size: 28px;
      font-weight: 800;
      letter-spacing: .3px;
    }
    .badge{
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 12px;
      border: 1px solid var(--border);
      color: var(--muted);
      background: rgba(15,23,42,.55);
      white-space:nowrap;
    }
    .badge.good{border-color: rgba(34,197,94,.35); color: rgba(34,197,94,.95); background: rgba(34,197,94,.10)}
    .badge.warn{border-color: rgba(245,158,11,.35); color: rgba(245,158,11,.95); background: rgba(245,158,11,.10)}
    .badge.bad{border-color: rgba(239,68,68,.35); color: rgba(239,68,68,.95); background: rgba(239,68,68,.10)}
    .checks{
      display:grid;
      gap: 8px;
      font-size: 13px;
      color: var(--muted);
    }
    .check{
      display:flex;
      gap: 8px;
      align-items:flex-start;
      padding: 10px 12px;
      border: 1px solid var(--border);
      background: rgba(15,23,42,.45);
      border-radius: 14px;
    }
    .dot{
      width: 10px; height: 10px;
      border-radius: 50%;
      margin-top: 4px;
      background: rgba(166,180,208,.6);
      flex: 0 0 auto;
    }
    .check.ok .dot{background: var(--good)}
    .check.warn .dot{background: var(--warn)}
    .check.bad .dot{background: var(--bad)}
    .preview{
      padding: 14px 14px;
      border: 1px dashed rgba(231,238,252,.20);
      background: rgba(11,18,32,.30);
      border-radius: 14px;
      line-height: 1.55;
      color: var(--text);
      font-size: 15px;
      white-space: pre-wrap;
    }
    .mini{
      font-size: 12px;
      color: rgba(166,180,208,.9);
    }
    .footer{
      text-align:center;
      color: rgba(166,180,208,.85);
      font-size: 12px;
      padding: 6px 0 2px;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div>
        <h1>–ì—Ä–∞ ¬´–°–∫–ª–∞–¥–∏ —Å–µ–Ω–∫–∞–Ω¬ª –¥–æ —Å–ª–æ–≤–∞ <span style="color:var(--accent)">–ñ–∏—Ç—Ç—è</span></h1>
        <div class="sub">
          –ó–∞–ø–æ–≤–Ω–∏ 5 —Ä—è–¥–∫—ñ–≤ –∑–∞ –ø—Ä–∞–≤–∏–ª–∞–º–∏ —Å–µ–Ω–∫–∞–Ω—É. –ì—Ä–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –ø–æ—Ä–∞—Ö—É—î –±–∞–ª–∏ —Ç–∞ –ø–æ–∫–∞–∂–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
          –ú–æ–∂–µ—à —Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏ —Å–µ–Ω–∫–∞–Ω —ñ –∑–¥–∞—Ç–∏ –≤—á–∏—Ç–µ–ª—é.
        </div>
      </div>
      <div class="pill" title="–ú–µ—Ç–∞: —Ç—Ä–µ–Ω—É—î–º–æ —Å–ª–æ–≤–Ω–∏–∫–æ–≤–∏–π –∑–∞–ø–∞—Å, –æ–±—Ä–∞–∑–Ω—ñ—Å—Ç—å —ñ –ª–∞–∫–æ–Ω—ñ—á–Ω—ñ—Å—Ç—å">
        üéØ <b>–ú—ñ—Å—ñ—è</b> +20 –±–∞–ª—ñ–≤
      </div>
    </header>

    <div class="grid">
      <!-- LEFT: FORM -->
      <section class="card">
        <div class="hd">
          <h2>üéÆ –†—ñ–≤–µ–Ω—å 1: –°—Ç–≤–æ—Ä–∏ —Å–µ–Ω–∫–∞–Ω</h2>
          <span class="badge" id="autosaveBadge">–ê–≤—Ç–æ–∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è: ON</span>
        </div>
        <div class="bd">
          <div class="rules">
            <div class="line"><b>1 —Ä—è–¥–æ–∫</b> ‚Äî 1 —ñ–º–µ–Ω–Ω–∏–∫ (—Ç–µ–º–∞): <b>–ñ–∏—Ç—Ç—è</b> (–≤–∂–µ –∑–∞–¥–∞–Ω–æ)</div>
            <div class="line"><b>2 —Ä—è–¥–æ–∫</b> ‚Äî 2 –ø—Ä–∏–∫–º–µ—Ç–Ω–∏–∫–∏ (—è–∫–µ?): —á–µ—Ä–µ–∑ –ø—Ä–æ–±—ñ–ª –∞–±–æ –∫–æ–º—É</div>
            <div class="line"><b>3 —Ä—è–¥–æ–∫</b> ‚Äî 3 –¥—ñ—î—Å–ª–æ–≤–∞ (—â–æ —Ä–æ–±–∏—Ç—å?): —á–µ—Ä–µ–∑ –ø—Ä–æ–±—ñ–ª –∞–±–æ –∫–æ–º—É</div>
            <div class="line"><b>4 —Ä—è–¥–æ–∫</b> ‚Äî —Ñ—Ä–∞–∑–∞ –∑ <b>4‚Äì6 —Å–ª—ñ–≤</b> (–¥—É–º–∫–∞/–≤—ñ–¥—á—É—Ç—Ç—è)</div>
            <div class="line"><b>5 —Ä—è–¥–æ–∫</b> ‚Äî 1 —Å–ª–æ–≤–æ-–ø—ñ–¥—Å—É–º–æ–∫ (—Å–∏–Ω–æ–Ω—ñ–º/–∞—Å–æ—Ü—ñ–∞—Ü—ñ—è)</div>
          </div>

          <div class="form" style="margin-top:14px">
            <div class="row">
              <label>
                <span>1) –¢–µ–º–∞ (—ñ–º–µ–Ω–Ω–∏–∫)</span>
                <span class="hint">—Ñ—ñ–∫—Å–æ–≤–∞–Ω–æ</span>
              </label>
              <input type="text" value="–ñ–∏—Ç—Ç—è" disabled />
              <div class="mini">–ü–æ—Ä–∞–¥–∞: –≤ —ñ–Ω—à–∏—Ö —ñ–≥—Ä–∞—Ö –º–æ–∂–Ω–∞ –∑—Ä–æ–±–∏—Ç–∏ –≤–∏–±—ñ—Ä —Ç–µ–º–∏ –∑—ñ —Å–ø–∏—Å–∫—É.</div>
            </div>

            <div class="row">
              <label>
                <span>2) –î–≤–∞ –ø—Ä–∏–∫–º–µ—Ç–Ω–∏–∫–∏</span>
                <span class="hint">2 —Å–ª–æ–≤–∞</span>
              </label>
              <input id="adj" type="text" placeholder="–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: –º—ñ–Ω–ª–∏–≤–µ —è—Å–∫—Ä–∞–≤–µ" autocomplete="off" />
            </div>

            <div class="row">
              <label>
                <span>3) –¢—Ä–∏ –¥—ñ—î—Å–ª–æ–≤–∞</span>
                <span class="hint">3 —Å–ª–æ–≤–∞</span>
              </label>
              <input id="verbs" type="text" placeholder="–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: –≤—á–∏—Ç—å –¥–∏–≤—É—î –∑–∞–≥–∞—Ä—Ç–æ–≤—É—î" autocomplete="off" />
            </div>

            <div class="row">
              <label>
                <span>4) –§—Ä–∞–∑–∞ (4‚Äì6 —Å–ª—ñ–≤)</span>
                <span class="hint">—Ä–µ—á–µ–Ω–Ω—è</span>
              </label>
              <textarea id="phrase" placeholder="–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: –î–∞—Ä—É—î —Å–µ–Ω—Å, —è–∫—â–æ –π–æ–≥–æ —Å—Ç–≤–æ—Ä—é—î—à"></textarea>
            </div>

            <div class="row">
              <label>
                <span>5) –°–ª–æ–≤–æ-–ø—ñ–¥—Å—É–º–æ–∫</span>
                <span class="hint">1 —Å–ª–æ–≤–æ</span>
              </label>
              <input id="sum" type="text" placeholder="–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: —à–ª—è—Ö" autocomplete="off" />
            </div>

            <div class="controls">
              <button class="primary" id="btnCheck">‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –π –ø–æ—Ä–∞—Ö—É–≤–∞—Ç–∏</button>
              <button class="ghost" id="btnRandom" title="–ü—ñ–¥–∫–∏–¥–∞—î —ñ–¥–µ—ó (—É—á–µ–Ω—å –º–æ–∂–µ –∑–∞–º—ñ–Ω–∏—Ç–∏)">üé≤ –ü—ñ–¥–∫–∞–∑–∫–∞-–Ω–∞—Ç—Ö–Ω–µ–Ω–Ω—è</button>
              <button id="btnCopy" title="–°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ –≥–æ—Ç–æ–≤–∏–π —Å–µ–Ω–∫–∞–Ω —É –±—É—Ñ–µ—Ä">üìã –°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ —Å–µ–Ω–∫–∞–Ω</button>
              <button class="danger" id="btnReset">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç–∏</button>
            </div>
            <div class="mini" id="saveNote"></div>
          </div>
        </div>
      </section>

      <!-- RIGHT: STATUS / PREVIEW -->
      <aside class="card">
        <div class="hd">
          <h2>üèÅ –†—ñ–≤–µ–Ω—å 2: –†–µ–∑—É–ª—å—Ç–∞—Ç</h2>
          <span class="badge" id="gradeBadge">–û—á—ñ–∫—É—î –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏</span>
        </div>
        <div class="bd">
          <div class="status">
            <div class="scorebox">
              <div class="score-top">
                <div>
                  <div class="mini">–¢–≤—ñ–π —Ä–∞—Ö—É–Ω–æ–∫</div>
                  <div class="score" id="score">0</div>
                </div>
                <div class="badge" id="rank">‚Äî</div>
              </div>
              <div class="mini" id="scoreHint">
                –ù–∞—Ç–∏—Å–Ω–∏ ¬´–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏¬ª, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –±–∞–ª–∏ —Ç–∞ –ø—ñ–¥–∫–∞–∑–∫–∏.
              </div>
            </div>

            <div class="checks" id="checks"></div>

            <div>
              <div class="mini" style="margin-bottom:8px">–ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –ø–µ—Ä–µ–≥–ª—è–¥ —Å–µ–Ω–∫–∞–Ω—É</div>
              <div class="preview" id="preview">–ñ–∏—Ç—Ç—è
‚Ä¶
‚Ä¶
‚Ä¶
‚Ä¶</div>
            </div>
          </div>
        </div>
      </aside>
    </div>

    <div class="footer">
      –ü–æ—Ä–∞–¥–∞ –¥–ª—è –≤—á–∏—Ç–µ–ª—è: –º–æ–∂–Ω–∞ –∑—ñ–±—Ä–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ —É—á–Ω—ñ–≤ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–Ω—à–æ—Ç/–∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –∞–±–æ –¥–æ–¥–∞—Ç–∏ –∫–Ω–æ–ø–∫—É ‚Äú–ù–∞–¥—ñ—Å–ª–∞—Ç–∏ –Ω–∞ Google Form‚Äù.
    </div>
  </div>

<script>
  // ===== Helpers =====
  const $ = (id) => document.getElementById(id);

  const normalize = (s) =>
    (s || "")
      .replace(/\s+/g, " ")
      .replace(/[‚Äú‚Äù¬´¬ª]/g, '"')
      .trim();

  const splitWords = (s) => {
    const t = normalize(s)
      .replace(/[,;]+/g, " ")
      .replace(/\s+/g, " ")
      .trim();
    if (!t) return [];
    return t.split(" ").filter(Boolean);
  };

  const countPhraseWords = (s) => {
    const cleaned = normalize(s)
      .replace(/[‚Äî‚Äì-]/g, " ")
      .replace(/[.,!?;:()"']/g, " ")
      .replace(/\s+/g, " ")
      .trim();
    if (!cleaned) return 0;
    return cleaned.split(" ").filter(Boolean).length;
  };

  const buildPreview = () => {
    const adj = normalize($("adj").value);
    const verbs = normalize($("verbs").value);
    const phrase = normalize($("phrase").value);
    const sum = normalize($("sum").value);

    const lines = [
      "–ñ–∏—Ç—Ç—è",
      adj || "‚Ä¶",
      verbs || "‚Ä¶",
      phrase || "‚Ä¶",
      sum || "‚Ä¶"
    ];
    $("preview").textContent = lines.join("\n");
  };

  const setBadge = (el, text, kind) => {
    el.textContent = text;
    el.classList.remove("good", "warn", "bad");
    if (kind) el.classList.add(kind);
  };

  // ===== Autosave =====
  const STORAGE_KEY = "syncan_life_game_v1";

  const save = () => {
    const data = {
      adj: $("adj").value,
      verbs: $("verbs").value,
      phrase: $("phrase").value,
      sum: $("sum").value,
      ts: Date.now()
    };
    localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
    const d = new Date(data.ts);
    $("saveNote").textContent = "–ó–±–µ—Ä–µ–∂–µ–Ω–æ: " + d.toLocaleString("uk-UA");
  };

  const load = () => {
    try{
      const raw = localStorage.getItem(STORAGE_KEY);
      if (!raw) return;
      const data = JSON.parse(raw);
      if (!data) return;
      $("adj").value = data.adj || "";
      $("verbs").value = data.verbs || "";
      $("phrase").value = data.phrase || "";
      $("sum").value = data.sum || "";
      if (data.ts) {
        const d = new Date(data.ts);
        $("saveNote").textContent = "–í—ñ–¥–Ω–æ–≤–ª–µ–Ω–æ: " + d.toLocaleString("uk-UA");
      }
    }catch(e){}
  };

  // ===== Game logic / scoring =====
  function checkAndScore(){
    buildPreview();

    const adjWords = splitWords($("adj").value);
    const verbWords = splitWords($("verbs").value);
    const phraseText = normalize($("phrase").value);
    const sumWords = splitWords($("sum").value);
    const phraseCount = countPhraseWords(phraseText);

    const checks = [];

    // Check 2 adjectives
    if (adjWords.length === 2) {
      checks.push({kind:"ok", text:"2 —Ä—è–¥–æ–∫: —Ä—ñ–≤–Ω–æ 2 —Å–ª–æ–≤–∞ ‚úÖ"});
    } else if (adjWords.length === 0) {
      checks.push({kind:"bad", text:"2 —Ä—è–¥–æ–∫: –ø–æ—Ä–æ–∂–Ω—å–æ ‚Äî –ø–æ—Ç—Ä—ñ–±–Ω–æ 2 –ø—Ä–∏–∫–º–µ—Ç–Ω–∏–∫–∏ ‚ùå"});
    } else {
      checks.push({kind:"warn", text:`2 —Ä—è–¥–æ–∫: –∑–∞—Ä–∞–∑ ${adjWords.length} —Å–ª—ñ–≤(–∞) ‚Äî —Ç—Ä–µ–±–∞ 2 ‚ö†Ô∏è`});
    }

    // Check 3 verbs
    if (verbWords.length === 3) {
      checks.push({kind:"ok", text:"3 —Ä—è–¥–æ–∫: —Ä—ñ–≤–Ω–æ 3 —Å–ª–æ–≤–∞ ‚úÖ"});
    } else if (verbWords.length === 0) {
      checks.push({kind:"bad", text:"3 —Ä—è–¥–æ–∫: –ø–æ—Ä–æ–∂–Ω—å–æ ‚Äî –ø–æ—Ç—Ä—ñ–±–Ω–æ 3 –¥—ñ—î—Å–ª–æ–≤–∞ ‚ùå"});
    } else {
      checks.push({kind:"warn", text:`3 —Ä—è–¥–æ–∫: –∑–∞—Ä–∞–∑ ${verbWords.length} —Å–ª—ñ–≤(–∞) ‚Äî —Ç—Ä–µ–±–∞ 3 ‚ö†Ô∏è`});
    }

    // Check phrase length 4-6 words
    if (phraseCount >= 4 && phraseCount <= 6) {
      checks.push({kind:"ok", text:`4 —Ä—è–¥–æ–∫: ${phraseCount} —Å–ª—ñ–≤ ‚Äî —É –Ω–æ—Ä–º—ñ ‚úÖ`});
    } else if (phraseCount === 0) {
      checks.push({kind:"bad", text:"4 —Ä—è–¥–æ–∫: –ø–æ—Ä–æ–∂–Ω—å–æ ‚Äî –ø–æ—Ç—Ä—ñ–±–Ω–∞ —Ñ—Ä–∞–∑–∞ 4‚Äì6 —Å–ª—ñ–≤ ‚ùå"});
    } else {
      checks.push({kind:"warn", text:`4 —Ä—è–¥–æ–∫: ${phraseCount} —Å–ª—ñ–≤ ‚Äî –º–∞—î –±—É—Ç–∏ 4‚Äì6 ‚ö†Ô∏è`});
    }

    // Check summary word (1 word)
    if (sumWords.length === 1) {
      checks.push({kind:"ok", text:"5 —Ä—è–¥–æ–∫: 1 —Å–ª–æ–≤–æ ‚úÖ"});
    } else if (sumWords.length === 0) {
      checks.push({kind:"bad", text:"5 —Ä—è–¥–æ–∫: –ø–æ—Ä–æ–∂–Ω—å–æ ‚Äî –ø–æ—Ç—Ä—ñ–±–Ω–æ 1 —Å–ª–æ–≤–æ ‚ùå"});
    } else {
      checks.push({kind:"warn", text:`5 —Ä—è–¥–æ–∫: ${sumWords.length} —Å–ª—ñ–≤(–∞) ‚Äî –º–∞—î –±—É—Ç–∏ 1 ‚ö†Ô∏è`});
    }

    // Extra style checks (soft)
    const uniqueness = new Set([...adjWords, ...verbWords, ...sumWords].map(w => w.toLowerCase()));
    if (uniqueness.size >= Math.max(1, adjWords.length + verbWords.length + sumWords.length - 1)) {
      checks.push({kind:"ok", text:"–°–ª–æ–≤–∞ –º–∞–π–∂–µ –Ω–µ –ø–æ–≤—Ç–æ—Ä—é—é—Ç—å—Å—è ‚Äî –∑–≤—É—á–∏—Ç—å –∫—Ä–∞—â–µ ‚úÖ"});
    } else {
      checks.push({kind:"warn", text:"–Ñ –ø–æ–≤—Ç–æ—Ä–∏ —Å–ª—ñ–≤ ‚Äî —Å–ø—Ä–æ–±—É–π –∑–∞–º—ñ–Ω–∏—Ç–∏ –Ω–∞ —Å–∏–Ω–æ–Ω—ñ–º–∏ ‚ö†Ô∏è"});
    }

    // Score
    let score = 0;

    // Structure points
    score += (adjWords.length === 2) ? 5 : (adjWords.length > 0 ? 2 : 0);
    score += (verbWords.length === 3) ? 5 : (verbWords.length > 0 ? 2 : 0);
    score += (phraseCount >= 4 && phraseCount <= 6) ? 5 : (phraseCount > 0 ? 2 : 0);
    score += (sumWords.length === 1) ? 5 : (sumWords.length > 0 ? 2 : 0);

    // Bonus: filled all lines (except fixed)
    const filled = (adjWords.length>0) + (verbWords.length>0) + (phraseCount>0) + (sumWords.length>0);
    if (filled === 4) score += 2;

    // Bonus: no duplicates (soft)
    const totalWords = adjWords.length + verbWords.length + sumWords.length;
    if (totalWords > 0 && uniqueness.size === totalWords) score += 2;

    // Clamp
    if (score > 20) score = 20;

    // Rank / feedback
    let rank = "‚Äî";
    let gradeText = "–û—á—ñ–∫—É—î –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏";
    let gradeKind = "warn";
    let hint = "";

    if (score >= 18){
      rank = "üåü –ú–∞–π—Å—Ç–µ—Ä —Å–µ–Ω–∫–∞–Ω—ñ–≤";
      gradeText = "–í—ñ–¥–º—ñ–Ω–Ω–æ";
      gradeKind = "good";
      hint = "–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —ñ–¥–µ–∞–ª—å–Ω–∞. –°–ø—Ä–æ–±—É–π –∑—Ä–æ–±–∏—Ç–∏ —Ñ—Ä–∞–∑—É —â–µ –±—ñ–ª—å—à –æ–±—Ä–∞–∑–Ω–æ—é ‚Äî —ñ –±—É–¥–µ —à–µ–¥–µ–≤—Ä.";
    } else if (score >= 14){
      rank = "üî• –î—É–∂–µ –¥–æ–±—Ä–µ";
      gradeText = "–î–æ–±—Ä–µ";
      gradeKind = "good";
      hint = "–ú–∞–π–∂–µ –≤—Å–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ü—ñ–¥–ø—Ä–∞–≤ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ª—ñ–≤ —É –ø—Ä–æ–±–ª–µ–º–Ω–∏—Ö —Ä—è–¥–∫–∞—Ö ‚Äî —ñ –±—É–¥–µ —Ç–æ–ø.";
    } else if (score >= 9){
      rank = "üß© –Ñ –ø—Ä–æ–≥—Ä–µ—Å";
      gradeText = "–ü–æ—Ç—Ä—ñ–±–Ω–æ –¥–æ–ø—Ä–∞—Ü—é–≤–∞—Ç–∏";
      gradeKind = "warn";
      hint = "–ó–∞–ø–æ–≤–Ω–µ–Ω–æ —á–∞—Å—Ç–∫–æ–≤–æ. –î–æ—Ç—Ä–∏–º–∞–π—Å—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —Å–ª—ñ–≤ ‚Äî —Ü–µ –≥–æ–ª–æ–≤–Ω–µ –ø—Ä–∞–≤–∏–ª–æ —Å–µ–Ω–∫–∞–Ω—É.";
    } else {
      rank = "üõ†Ô∏è –ü–æ—á–∞—Ç–æ–∫";
      gradeText = "–°–ø—Ä–æ–±–∞";
      gradeKind = "bad";
      hint = "–ü–æ—á–Ω–∏ –∑ –ø—Ä–æ—Å—Ç–æ–≥–æ: 2 –ø—Ä–∏–∫–º–µ—Ç–Ω–∏–∫–∏, 3 –¥—ñ—î—Å–ª–æ–≤–∞, —Ñ—Ä–∞–∑–∞ 4‚Äì6 —Å–ª—ñ–≤, 1 —Å–ª–æ–≤–æ-–ø—ñ–¥—Å—É–º–æ–∫.";
    }

    // Render checks
    const checksEl = $("checks");
    checksEl.innerHTML = "";
    for (const c of checks){
      const div = document.createElement("div");
      div.className = "check " + (c.kind === "ok" ? "ok" : c.kind === "bad" ? "bad" : "warn");
      div.innerHTML = `<span class="dot"></span><div>${c.text}</div>`;
      checksEl.appendChild(div);
    }

    $("score").textContent = String(score);
    $("rank").textContent = rank;
    setBadge($("gradeBadge"), gradeText, gradeKind);
    $("scoreHint").textContent = hint;
  }

  // ===== Random inspiration =====
  const ideas = {
    adj: [
      "–∫—Ä–∏—Ö–∫–µ —Å–∏–ª—å–Ω–µ",
      "–º—ñ–Ω–ª–∏–≤–µ —Ü—ñ–Ω–Ω–µ",
      "—Å–∫–ª–∞–¥–Ω–µ –ø—Ä–µ–∫—Ä–∞—Å–Ω–µ",
      "–Ω–µ—Å–ø–æ–¥—ñ–≤–∞–Ω–µ —Å–ø—Ä–∞–≤–∂–Ω—î",
      "–∫–æ—Ä–æ—Ç–∫–µ –±–µ–∑–º–µ–∂–Ω–µ",
      "—Ç–µ–Ω–¥—ñ—Ç–Ω–µ –≤–ø–µ—Ä—Ç–µ"
    ],
    verbs: [
      "–≤—á–∏—Ç—å –∑–º—ñ–Ω—é—î –∑–∞–≥–∞—Ä—Ç–æ–≤—É—î",
      "–¥–∏–≤—É—î –±–æ–ª–∏—Ç—å –ª—ñ–∫—É—î",
      "–Ω–∞–¥–∏—Ö–∞—î –≤–µ–¥–µ –∑—Ä–æ—Å—Ç–∞—î",
      "–ª–∞–º–∞—î –±—É–¥—É—î –ø—ñ–¥–Ω—ñ–º–∞—î",
      "—Å–º—ñ—î—Ç—å—Å—è –ø–ª–∞—á–µ —Ç—Ä–∏–º–∞—î",
      "–¥–∞—î –∑–∞–±–∏—Ä–∞—î –ø–æ–≤–µ—Ä—Ç–∞—î"
    ],
    phrase: [
      "–°–µ–Ω—Å –Ω–∞—Ä–æ–¥–∂—É—î—Ç—å—Å—è –∑ –Ω–∞—à–∏—Ö —Ä—ñ—à–µ–Ω—å",
      "–ö–æ–∂–µ–Ω –¥–µ–Ω—å –ø—Ä–æ—Å–∏—Ç—å –±—É—Ç–∏ —Å–º—ñ–ª–∏–≤–∏–º",
      "–°–≤—ñ—Ç–ª–æ –∑–Ω–∞—Ö–æ–¥–∏—à –Ω–∞–≤—ñ—Ç—å —É —Ç–µ–º—Ä—è–≤—ñ",
      "–£—Å–µ –º–∏–Ω–∞—î, –∞–ª–µ –¥–æ—Å–≤—ñ–¥ –ª–∏—à–∞—î—Ç—å—Å—è",
      "–¶—ñ–Ω—É–π –º–∏—Ç—å, –±–æ –≤–æ–Ω–∞ –Ω–µ–ø–æ–≤—Ç–æ—Ä–Ω–∞",
      "–°—Ç–≤–æ—Ä—é–π —Å–µ–±–µ, –∞ –Ω–µ —á–µ–∫–∞–π –≤–∏–ø–∞–¥–∫—É"
    ],
    sum: ["—à–ª—è—Ö","–≤–∏–±—ñ—Ä","–¥–æ—Å–≤—ñ–¥","—Ä—É—Ö","–º–∏—Ç—å","—Å–µ–Ω—Å"]
  };

  function putRandom(){
    const pick = (arr) => arr[Math.floor(Math.random()*arr.length)];
    if (!normalize($("adj").value)) $("adj").value = pick(ideas.adj);
    if (!normalize($("verbs").value)) $("verbs").value = pick(ideas.verbs);
    if (!normalize($("phrase").value)) $("phrase").value = pick(ideas.phrase);
    if (!normalize($("sum").value)) $("sum").value = pick(ideas.sum);
    buildPreview();
    save();
  }

  // ===== Copy =====
  async function copyPreview(){
    buildPreview();
    const text = $("preview").textContent;
    try{
      await navigator.clipboard.writeText(text);
      $("btnCopy").textContent = "‚úÖ –°–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ!";
      setTimeout(() => $("btnCopy").textContent = "üìã –°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ —Å–µ–Ω–∫–∞–Ω", 1200);
    }catch(e){
      alert("–ù–µ –≤–¥–∞–ª–æ—Å—è —Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏ (–±—Ä–∞—É–∑–µ—Ä –∑–∞–±–ª–æ–∫—É–≤–∞–≤ –¥–æ—Å—Ç—É–ø). –°–ø—Ä–æ–±—É–π –≤–∏–¥—ñ–ª–∏—Ç–∏ —Ç–µ–∫—Å—Ç –≤—Ä—É—á–Ω—É.");
    }
  }

  // ===== Reset =====
  function resetAll(){
    $("adj").value = "";
    $("verbs").value = "";
    $("phrase").value = "";
    $("sum").value = "";
    localStorage.removeItem(STORAGE_KEY);
    $("saveNote").textContent = "";
    $("score").textContent = "0";
    $("rank").textContent = "‚Äî";
    $("checks").innerHTML = "";
    setBadge($("gradeBadge"), "–û—á—ñ–∫—É—î –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏", "warn");
    $("scoreHint").textContent = "–ù–∞—Ç–∏—Å–Ω–∏ ¬´–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏¬ª, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –±–∞–ª–∏ —Ç–∞ –ø—ñ–¥–∫–∞–∑–∫–∏.";
    buildPreview();
  }

  // ===== Events =====
  ["adj","verbs","phrase","sum"].forEach(id => {
    $(id).addEventListener("input", () => { buildPreview(); save(); });
  });

  $("btnCheck").addEventListener("click", (e) => { e.preventDefault(); checkAndScore(); save(); });
  $("btnRandom").addEventListener("click", (e) => { e.preventDefault(); putRandom(); });
  $("btnCopy").addEventListener("click", (e) => { e.preventDefault(); copyPreview(); });
  $("btnReset").addEventListener("click", (e) => { e.preventDefault(); resetAll(); });

  // Init
  load();
  buildPreview();
</script>
</body>
</html>